# 컴포넌트(Component)

## 컴포넌트 - 기초
```vue
<!-- App.vue -->
<template>
  <MyBtn>Banana</MyBtn>
  <MyBtn
    :color="color">
    <span style="color: red">Banana</span>
  </MyBtn>
  <MyBtn
    large
    color="royalblue">
    Apple
  </MyBtn>
  <MyBtn>Cherry</MyBtn>
  <!-- 한번 만들어 놓은 컴포넌트는 재활용이 가능하다 -->
  <!-- 이것을 부모컴포넌트와 자식컴포넌트간의 데이터통신이라 한다 -->
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  },
  data() {
    return {
      color: '#000'
    }
  }
}
</script>
```
```vue
<!-- MyBtn.vue -->
<template>
  <div
    :class="{ large }"
    :style="{ backgroundColor: color }"
    class="btn">
    <slot></slot>
    <!-- 
      컴포넌트도, 일반적인 요소처럼 태그 사이에 내용을 적을 수 있고
      해당 위치를 슬롯으로 적어줄 수 있다 
    -->
  </div>
</template>

<script>
export default {
  props: {
  // 컴포넌트가 실행이 될 때, 마치 속성처럼 받아내는 옵션
  // 데이터 통신을 만들어준다
    color: {
      type: String,
      // color 속성은 String으로 받아야 한다고 명시
      default: 'gray'
    },
    large: {
      type: Boolean,
      default: false
    },
  }
}
</script>

<style scoped lang="scss">
  .btn {
    display: inline-block;
    padding: 6px 12px;
    margin: 4px;
    border-radius: 4px;
    background-color: gray;
    color: white;
    cursor: pointer;
    &.large {
      padding: 10px 20px;
      font-size: 20px;
    }
  }
</style>
```

## 컴포넌트 - 속성 상속(Attribute Inheritance)

```vue
<!-- App.vue-->
<template>
  <MyBtn
    class="Hee"
    style="color: red;">
    Banana
  </MyBtn>
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  }
}
</script>
```
```vue
<!-- Mybtn.vue-->
<template>
  <!-- template의 자식요소를 해당 컴포넌트의 최상위 요소라 한다 -->

  <div class="btn">
    <!-- 최상위(root) 요소 -->
    <slot></slot>
  </div>

  <!-- <div></div> -->
  <!-- 최상위(root) 요소 -->

  <!-- 
    하나의 컴포넌트에 최상위 요소가 두 개 존재한다
    이러한 경우, 컴포넌트가 사용되는 곳에 적용이 된 여러가지 속성이
    어떠한 최상위 요소로 들어갈 지 정확하게 알 수 없기 때문에
    적용이 되지 않고 렌더링 된다

    최상위 요소가 하나일 때, 컴포넌트가 사용되는 곳에 작성해놓은
    클래스나, 기타 속성들이 컴포넌트 내부에 있는 하나의 요소에 연결이 되는 것을 
    속성의 상속이라 한다
  -->
</template>

<script>
export default {

}
</script>

<style scoped lang="scss">
  .btn {
    display: inline-block;
    padding: 6px 12px;
    margin: 4px;
    border-radius: 4px;
    background-color: gray;
    color: white;
    cursor: pointer;
  }
</style>
```
```vue
<!-- 원하는 요소에 속성 넣기-->
<!-- MyBtn.vue-->
<template>
  <div class="btn">
    <slot></slot>
  </div>
  <h1
    :class="$attrs.class"
    :style="$attrs.style"></h1>
    <!-- 들어오는 요소를 $attrs를 사용하여 원하는 요소에 넣어 줄 수 있다 -->
</template>

<script>
export default {
  inheritAttrs: false,
  // 속성의 상속을 지정해주는 옵션
  // 최상위 요소가 하나만 있어도 상속 X
  created() {
    console.log(this.$attrs)
  }
  // 컴포넌트가 생성된 직후
  // 특정 객체를 출력
}
</script>
```
```vue
<!-- 더 간단하게 속성 넣기-->
<!-- MyBtn.vue-->
<template>
  <div class="btn">
    <slot></slot>
  </div>
  <h1 v-bind="$attrs"></h1>
</template>

<script>
export default {
  inheritAttrs: false,
  created() {
    console.log(this.$attrs)
  }
}
</script>
```

## 컴포넌트 = Emit

```vue
<!-- App.vue -->
<template>
  <MyBtn
    @hee="log"
    @change-msg="logMsg">
    <!-- 
      컴포넌트에 연결하는 이벤트는, 
      실제로 쓸 수 있는 이벤트의 이름이 아니더라도 괜찮다 
      emits라는 문법으로 정확하게 받아서 어디에서 사용할지 적어주기만 하면 된다
    -->
    Banana
  </MyBtn>
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  },
  methods: {
    log(event) {
      console.log('Click!!')
      console.log(event)
    },
    logMsg(msg) {
      console.log(msg)
    }
  }
}
</script>

<!-- Mybtn.vue -->
<template>
  <div class="btn">
    <slot></slot>
  </div>
  <h1 @dblclick="$emit('hee', $event)">
    <!-- ( 이벤트, 데이터 ) -->
    <!-- 두번째 인수로는, 해당 이벤트가 실행될 때, 데이터를 넘겨 줄 수 있다 -->
    ABC
  </h1>
  <input
    type="text"
    v-model="msg" />
</template>

<script>
export default {
  emits: [
    'hee',
    'changeMsg'
  ],
  // 클릭이라는 이벤트를, 컴포넌트 내부에서 사용을 하겠다! 라고 정의하는 것
  data() {
    return {
      msg: ''
    }
  },
  watch: {
    msg() {
      this.$emit('changeMsg', this.msg)
    }
  }
}
</script>

<style scoped lang="scss">
  .btn {
    display: inline-block;
    padding: 6px 12px;
    margin: 4px;
    border-radius: 4px;
    background-color: gray;
    color: white;
    cursor: pointer;
  }
</style>
```

## 컴포넌트 - Slot

### Fallback contents
```vue
<!-- App.vue-->
<template>
  <MyBtn>
    <span>Banana</span>
    <span>(B)</span> 
  </MyBtn>
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  }
}
</script>

<!-- MyBtn.vue-->
<template>
  <div class="btn">
    <slot>Apple</slot>
    <!-- 
      컨텐트가 없는 경우, slot에 삽입된 기본적인 내용이 출력된다 
      이러한 것을 Fallback Contents 라고 한다
      Fallback: 대체된다
    -->
  </div>
</template>

<!-- 스타일 생략-->
```

### `v-slot: => #`

```vue
<!-- App.vue-->
<template>
  <MyBtn>
    <template #icon>
      <span>(B)</span> 
    </template>
    <template #text>
      <span>Banana</span>
    </template>
    <!-- 
      순서가 Mybtn에서 보장되어 있기 때문에, 
      순서를 바꾸어도 설정한 내용대로 출력된다 
    -->
  </MyBtn>
</template>

<script>
import MyBtn from '~/components/MyBtn'

export default {
  components: {
    MyBtn
  }
}
</script>

<!-- MyBtn.vue-->
<template>
  <div class="btn">
    <slot name="icon"></slot>
    <slot name="text"></slot>
  </div>
  <!-- slot에 이름을 지정해주어서 순서를 보장해줄 수 있다 -->
</template>

<!-- 스타일 생략-->
```

## 컴포넌트 - Provide, Inject

```vue
<!-- App.vue -->
<template>
  <button @click="message = 'Good?'">
    Click!
  </button>
  <h1>App: {{ message }}</h1>
  <Parent />
</template>

<script>
import Parent from '~/components/Parent'
import { computed } from 'vue'

export default {
  components: {
    Parent
  },
  data() {
    return {
      message: 'Hello world!'
    }
  },
  provide() {
    return {
      msg: computed(() => this.message)
    } // provide를 사용할 때, 반응성을 유지하려면 computed를 사용한다
  } 
}
</script>
```
```vue
<!-- Parent.vue -->
<template>
  <Child />
</template>

<script>
import Child from '~/components/Child'
export default {
  components: {
    Child
  }
}
</script>
```
```vue
<!-- Child.vue -->
<template>
  <div>
    Child: {{ msg.value }}
  </div>
</template>

<script>
export default {
  inject: ['msg']
}
</script>
```

## Refs

```vue
<!-- App.vue -->
<template>
  <Hello ref="hello" />
</template>

<script>
import Hello from '~/components/Hello'

export default {
  components: {
    Hello
  },
  mounted() {
    console.log(this.$refs.hello.$refs.good)
  } // ref는 컴포넌트가 연결된 직후에만 사용할 수 있기 때문에 mounted를 사용한다
}   // 컴포넌트를 참조할때는 $el을 적어주어야만 실제로 참조를 할 수 있다
    // 최상위 요소가 하나 이상이면, 특정한 이름으로 참조할 수도 있다.
    // 이때는 $refs를 한번 더 사용한다
</script>
```
```vue
<!-- Hello.vue -->
<template>
  <h1>Hello!</h1>
  <h1 ref="good">
    Good
  </h1>
</template>
```