# `Provide` & `inject`
`Provide`로 제공되는 데이터는 반응형이 아니다

>App.vue
```vue
<template>
  <HelloWorld />
  <Brother />
</template>

<script>
import { computed } from 'vue' // 계산된 데이터를 만들어주는 함수, 옵션에서 지정하는 computed와는 다르다
import HelloWorld from '~/components/HelloWorld.vue'
import Brother from '~/components/Brother.vue'


export default {
  components: {
    HelloWorld,
    Brother
  },
  provide() {
    return {
      count: computed(() => this.count),
      increase: this.increase // 수정권한에 대한 것도 provide해줘야한다
    }
  },
  data() {
    return {
      count: 0
    }
  },
  methods: {
    increase() {
      this.count += 1
    }
  }
}
</script>

```

>HelloWorld.vue
```vue
<template>
  <h1>{{ count }}</h1>
  <button @click="increase"> 
    INCREASE
  </button>
</template>

<script>
export default {
  inject: ['count', 'increase']
}
</script>

```

>Brother.vue
```vue
<template>
  <h1>{{ count }}</h1>
</template>

<script>
export default {
  inject: ['count']
}
</script>

```

# vuex modules
>HelloWorld.vue
```vue
<template>
  <h1>{{ count }}</h1>
  <button @click="increase"> 
    INCREASE
  </button>
</template>

<script>
import { mapState } from 'vuex'

export default {
  computed: {
    ...mapState('count', [
      'count',
      'double',
      'a'
    ])
  },
  methods: {
    increase() {
      this.$store.dispatch('count/increase')
    }
  }
}
</script>

```

>Brother.vue
```vue
<template>
  <h1>{{ count }}</h1>
  <h2>{{ $store.state.message.message }}</h2>
  <button @click="updateMessage">
    Update Message!
  </button>
</template>

<script>
export default {
  computed: {
    count() {
      return this.$store.state.count.count
    }
  },
  methods: {
    updateMessage() {
      this.$store.dispatch('message/updateMessage', 'Good!')
    }
  }
}
</script>

```

>index.js
```js
import { createStore } from 'vuex'
import message from './message'
import count from './count'

export default createStore({
  modules: {
    message,
    count
  }
})

```

>count.js
```js
export default {
  namespaced: true,
  state() {
    return {
      count: 0,
      double: 2,
      a: ''
    }
  },
  mutations: {
    setState(state, payload) {
      for (const key in payload)
        state[key] = payload[key]
    }
  },
  actions: {
    increase({ state, commit }) {
      commit('setState', {
        count: state.count + 1, // += 1은 할당하는 것, 할당할 권한은 actions에게 없다
      })
    }
  }
}

```

>message.js
```js
export default {
  namespaced: true,
  state() {
    return {
      message: ''
    }
  },
  mutations: {
    setState(state, payload) {
      for (const key in payload)
        state[key] = payload[key]
    }
  },
  actions: {
    updateMessage({ commit }, msg) {
      commit('setState', {
        message: msg
      })
    }
  }
}

```

>main.js
```js
import { createApp } from 'vue'
import store from './store' // index라는 이름은 폴더에서 메인이 되는 파일이므로, 이름 생략 가능
import App from './App.vue'

createApp(App)
  .use(store)
  .mount('#app')

```


# vuex helper function
```js
function mapState(moduleName, stateNames) {
  const returnValue = {}
  stateNames.forEach(name => {
    returnValue[name] = function() {
      return this.$store.state[moduleName][name]
    }
  })
  return returnValue
} 
```
```js
function mapState(moduleName, stateNames) {
  return stateNames.reduce((acc, cur) => {
    acc[cur] = function() {
      return this.$store.state[moduleName][cur]
    }
    return acc
  }, {})
}
```
이러한 형태로 `mapState` helper function을 구현해볼 수 있다!